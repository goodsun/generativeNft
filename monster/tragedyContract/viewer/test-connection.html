<!DOCTYPE html>
<html>
<head>
    <title>Test Connection</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <h1>Testing Connection to Bon-Soleil</h1>
    <div id="result"></div>
    
    <script>
        async function test() {
            const result = document.getElementById('result');
            
            try {
                // Test 1: Provider connection
                result.innerHTML += '<p>Testing provider connection...</p>';
                const provider = new ethers.providers.JsonRpcProvider("https://dev2.bon-soleil.com/rpc");
                
                // Test 2: Get block number
                result.innerHTML += '<p>Getting block number...</p>';
                const blockNumber = await provider.getBlockNumber();
                result.innerHTML += `<p style="color: green;">✓ Block number: ${blockNumber}</p>`;
                
                // Test 3: Get network
                result.innerHTML += '<p>Getting network info...</p>';
                const network = await provider.getNetwork();
                result.innerHTML += `<p style="color: green;">✓ Network: ${JSON.stringify(network)}</p>`;
                
                // Test 4: Contract call
                result.innerHTML += '<p>Testing NFT contract...</p>';
                const NFT_ADDRESS = "0x79BA8659feF8A0792A3EDD0E27e885e72eFbc9B0";
                const NFT_ABI = ["function totalSupply() view returns (uint256)"];
                
                const nftContract = new ethers.Contract(NFT_ADDRESS, NFT_ABI, provider);
                const totalSupply = await nftContract.totalSupply();
                result.innerHTML += `<p style="color: green;">✓ Total Supply: ${totalSupply.toString()}</p>`;
                
            } catch (error) {
                result.innerHTML += `<p style="color: red;">✗ Error: ${error.message}</p>`;
                console.error('Full error:', error);
            }
        }
        
        test();
    </script>
</body>
</html>