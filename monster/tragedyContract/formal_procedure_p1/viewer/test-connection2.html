<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Connection 2</title>
</head>
<body>
    <h1>Testing Bon-Soleil Connection (Alternative)</h1>
    <div id="status">Loading...</div>
    <pre id="log"></pre>
    
    <script type="module">
        const log = (msg) => {
            console.log(msg);
            document.getElementById('log').innerHTML += msg + '\n';
        };
        
        // Import ethers from unpkg
        import { ethers } from 'https://unpkg.com/ethers@5.7.2/dist/ethers.esm.min.js';
        
        async function test() {
            try {
                log('Starting test...');
                log('ethers version: ' + ethers.version);
                
                const RPC_URL = "https://dev2.bon-soleil.com/rpc";
                log('RPC URL: ' + RPC_URL);
                
                const provider = new ethers.providers.JsonRpcProvider(RPC_URL);
                log('Provider created');
                
                await provider.ready;
                log('Provider ready');
                
                const network = await provider.getNetwork();
                log('Network: ' + JSON.stringify(network));
                
                const blockNumber = await provider.getBlockNumber();
                log('Current block: ' + blockNumber);
                
                // Test contract
                const BANKED_NFT_ADDRESS = "0x930Fc003DD8989E8d64b9Bba7673180C369178C5";
                const abi = ["function totalMinted() view returns (uint256)"];
                const contract = new ethers.Contract(BANKED_NFT_ADDRESS, abi, provider);
                
                const totalMinted = await contract.totalMinted();
                log('Total minted: ' + totalMinted.toString());
                
                document.getElementById('status').innerHTML = '<span style="color: green">✓ Connection successful!</span>';
                
            } catch (error) {
                log('ERROR: ' + error.message);
                log('Stack: ' + error.stack);
                document.getElementById('status').innerHTML = '<span style="color: red">✗ Connection failed!</span>';
            }
        }
        
        test();
    </script>
</body>
</html>